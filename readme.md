# REST full API usin Lumen
## Возможности API
1. Создать пользователя
2. Создать рецепт
3. Получить рецепты(пока только все)
4. Обновлять рецепты
5. Удалять рецепты.
6. Возможно указать локаль, чтобы получать сообщения системы в нужном языке


## Обмен клиента и сервера

В качестве формата обмена данными выбран JSON. 
***
## Как работает API

### 1. создаем пользователя.
сылка ``` http://example.com/api/v1/user ``` метод **POST**
Заголовок: Content-Type: application/json

Тело запроса:
```php
{
    "username": "test",
    "password": "test",
    "email": "test@mail.ru"
}
```
### 2. логинимся
сылка ``` http://example.com/api/v1/auth ``` метод **POST**

Тело запроса:
```php
{
    "username": "test",
    "password": "test"
}
```
В ответ получим токен.

### 3. Полученный токен передаем в заголовках например: 
``` Token: f6fdc3dfe39c6762131930e1028c412ce26533af81a3b7604e32ce1f8430" ```

Дальше можем создавать рецепты, удалять,обновлять от лица этого пользователя

## Используемые статус HTTP-статус коды:

* **200** - успешный запрос
* **201** - рецепт создан
* **206** - не полные данные для создания рецепта
* **400** - плохой запрос
* **401** - не аутентифицирован
* **403** - не доступа к API или выполняемому дейтсвию.
* **404** - не существует. Можно словить если не сущетвует action или же рецепт

и другие, которые может выбросить lumen

## Используемые HTTP-методы

* **GET** - для получения данных
* **POST** - для добавления данных
* **PUT** - для обновления данных
* **DELETE** - для удаления данных

## Создание рецепта

сылка ``` http://example.com/api/v1/recipe ``` метод **POST**
Заголовок: 
``` 
Content-Type: application/json
Token: f6fdc3dfe39c6762131930e1028c412ce26533af81a3b7604e32ce1f8430" ```
Тело запроса:
```php
{
    "title": "title",
    "image": "image",
    "description": "description"
}
```
в ответ получим
```php
{
    "ok": {
        "status": 201,
        "message": "Recipe with id 5 successfully added"
    }
}
```
Рецепт будет создан для текущего залогиненного пользователя.

Для удаления, и обновления хватает передавать идентификатор рецепта, формат тела
запроса идентичен телу при запросе.

## Как сохраняем изображение

Изображение ожидается в формате base64 и будет в этом же формате сохранен в базе данных
Возможен вариант, сохранения физически на диск, а при отдаче клиенту обратно конвертировать 
в base64. 
    Я выбрал вариант с сохранения сразу в базе данных в формате base64