# REST full API usin Lumen

## Обмен клиента и сервера

В качестве формата обмена данными выбран JSON. 
***
## Как работает API
***
### 1. создаем пользователя.
сылка ``` http://example.com/api/v1/user ``` метод **POST**

Тело запроса:
***
```php
{
    "username": "test",
    "password": "test",
    "email": "test@mail.ru"
}
```
### 2. логинимся
сылка ``` http://example.com/api/v1/auth ``` метод **POST**

Тело запроса:
***
```php
{
    "username": "test",
    "password": "test"
}
```
В ответ получим токен.

3. Полученный токен передаем в заголовках например: ``` Token: f6fdc3dfe39c6762131930e1028c412ce26533af81a3b7604e32ce1f8430" ```



## Используемые статус HTTP-статус коды:

> **200** - успешный запрос
> **201** - рецепт создан
> **206** - не полные данные для создания рецепта
> **400** - плохой запрос
> **401** - не аутентифицирован
> **403** - не доступа к API или выполняемому дейтсвию.
> **404** - не существует. Можно словить если не сущетвует action или же рецепт
и другие, которые может выбросить lumen

##Используемые HTTP-методы

> **GET** - для получения данных
> **POST** - для добавления данных
> **PUT** - для обновления данных
> **DELETE** - для удаления данных

## Создание рецепта

сылка ``` http://example.com/api/v1/recipe ``` метод **POST**

Тело запроса:
***
```php
{
    "title": "title",
    "image": "image",
    "description": "description"
}
```
в ответ получим
***
```php
{
    "ok": {
        "status": 201,
        "message": "Recipe with id 5 successfully added"
    }
}
```
Рецепт будет создан для текущего залогиненного пользователя.
